(("undefined"!=typeof self?self:this).webpackJsonp=("undefined"!=typeof self?self:this).webpackJsonp||[]).push([[141],{2556:function(e,t,i){e.exports={container:"_3FzHnX",mediaPreview:"_3TtC8T",imagePlaceholder:"_1QSz1W",arrowLeft:"rv7fwm",arrowRight:"HhAy2u",video:"_18NE0y",videoClickMask:"_3xJlF0",playButton:"_1YjD61",replayButton:"s9gi2R",overlayWrapper:"_2TD6up",hidden:"_2OA-t2",videoError:"_3n__-5",videoErrorBtn:"_1wnrXs",videoErrorTxt:"urYZCt",videoErrorSuggestion:"_2AECp6",videoErrorMask:"_1CBukO"}},2557:function(e,t,i){e.exports={container:"_338qaA",title:"_2xEec7",thumbnails:"_2tm-At",thumbnail:"_2e-ot7",actions:"_1VnKdi",button:"_1Ji1OB",addToCartButton:"_1RRhCq",addToCartIcon:"_13LNsl"}},2558:function(e,t,i){e.exports={container:"_2yjnsD"}},2733:function(e,t,i){"use strict";i.r(t);var n=i(0),o=i.n(n),a=i(8),d=i.n(a),r=i(402),s=i(1769),l=i(1816),c=i(1770),h=i(904),m=i(416),u=i(409),v=i(1753),p=i(1855),E=i(80),y=i(46),f=i(2556),S=i.n(f);function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var _=function(e){var t,i;function o(t){var i;return(i=e.call(this,t)||this).initializeVideo=function(e){if(p.a&&e&&"video"===e.type&&i.videoDom&&!i.videoPlayer){var t=new p.d(__LOCALE__,i.videoDom,e.id?e.id:"");t.initialize(),t.on(p.b.ENDED,i.handleVideoEnded),t.on(p.b.PLAY,i.handleVideoPlaying),t.on(p.b.PLAYING,i.handleVideoPlaying),t.on(p.b.PAUSED,i.handleVideoPaused),t.on(p.b.SEEKING,i.handleVideoSeeking),t.on(p.b.SEEKED,i.handleVideoSeeked),i.videoPlayer=t,t.play()}},i.setVideoDomRef=function(e){e&&(i.videoDom=e)},i.state={videoState:p.c.PLAYING,isVideoPausedByUser:!1},i.handleVideoPlaying=i.handleVideoPlaying.bind(w(w(i))),i.handleVideoPaused=i.handleVideoPaused.bind(w(w(i))),i.handleVideoEnded=i.handleVideoEnded.bind(w(w(i))),i.handleVideoSeeking=i.handleVideoSeeking.bind(w(w(i))),i.handleVideoSeeked=i.handleVideoSeeked.bind(w(w(i))),i.handleVideoClick=i.handleVideoClick.bind(w(w(i))),i.initializeVideo=i.initializeVideo.bind(w(w(i))),i.videoPlayer=null,i.videoDom=null,i.mounted=!1,i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.componentDidMount=function(){this.mounted=!0,this.initializeVideo(this.props.media)},a.UNSAFE_componentWillReceiveProps=function(e){this.initializeVideo(e.media)},a.componentDidUpdate=function(e){var t=this.props.media,i=this.videoPlayer;i&&t&&(e.media&&t.type===e.media.type&&t.mediaId===e.media.mediaId||("video"===t.type?this.state.isVideoPausedByUser||i&&i.play():i&&i.pause()))},a.componentWillUnmount=function(){this.mounted=!1,this.videoPlayer&&this.videoPlayer.destroy(),this.videoDom=null},a.handleVideoPlaying=function(){this.mounted&&this.setState({videoState:p.c.PLAYING})},a.handleVideoPaused=function(){this.mounted&&this.setState({videoState:p.c.PAUSED})},a.handleVideoEnded=function(){this.mounted&&this.setState({videoState:p.c.ENDED})},a.handleVideoSeeking=function(){this.mounted&&this.setState({videoState:p.c.SEEKING})},a.handleVideoSeeked=function(){this.mounted&&this.setState({videoState:this.videoPlayer&&this.videoPlayer.isPaused()?p.c.PAUSED:p.c.PLAYING})},a.handleVideoClick=function(){if(this.videoPlayer){var e=this.videoPlayer;e.isPaused()?e.play():e.pause(),this.mounted&&(this.state.videoState===p.c.ENDED?this.setState({isVideoPausedByUser:!1}):this.setState({isVideoPausedByUser:!this.state.isVideoPausedByUser}),this.setState({videoState:this.state.videoState===p.c.PLAYING?p.c.PAUSED:p.c.PLAYING}))}},a.render=function(){var e,t=this.props,i=t.media,o=t.showArrows,a=t.onLeftArrowClick,r=t.onRightArrowClick,f=t.overlays,w=t.previewInfo,_=this.state.videoState,P=!!i&&"video"===i.type;return n.createElement("div",{className:S.a.container},n.createElement("video",{ref:this.setVideoDomRef,"data-dashjs-player":!0,controls:!0,style:{display:P&&p.a?"block":"none"},className:S.a.video}),P&&(p.a?n.createElement(n.Fragment,null,n.createElement("div",{className:S.a.videoClickMask,onClick:this.handleVideoClick}),_===p.c.PAUSED||_===p.c.SEEKING?n.createElement(l.a,{className:S.a.playButton}):_===p.c.ENDED&&n.createElement(c.a,{className:S.a.replayButton})):n.createElement("div",{className:S.a.videoError,style:i?Object(E.c)(i.mediaId,!1):null},n.createElement("div",{className:S.a.videoErrorMask},n.createElement(s.a,{className:S.a.videoErrorBtn}),n.createElement("div",{className:S.a.videoErrorTxt},Object(y.b)("msg_video_not_supported")),n.createElement("div",{className:S.a.videoErrorSuggestion},Object(y.b)("msg_suggest_chrome"))))),!P&&n.createElement(h.a,{src:i&&i.mediaId?Object(E.b)(i.mediaId):"",className:S.a.mediaPreview,placeholderClassName:S.a.imagePlaceholder}),!!f&&n.createElement("div",{className:d()(S.a.overlayWrapper,(e={},e[S.a.hidden]=P&&_!==p.c.ENDED,e))},n.createElement(v.a,{overlays:f,previewInfo:w})),o&&n.createElement("div",{className:S.a.arrowLeft,onClick:a},n.createElement(m.a,null)),o&&n.createElement("div",{className:S.a.arrowRight,onClick:r},n.createElement(u.a,null)))},o}(n.Component),P=i(52),k=i(1815),b=i(236),C=i(2557),N=i.n(C);var V=Object(P.c)(function(e,t){var i=t.item?Object(b.d)(e,t.item.shopid):null;return{shop:i&&i.shopInfo}})(function(e){var t=e.item,i=e.overlays;return o.a.createElement("div",{className:N.a.container},o.a.createElement("div",{className:N.a.title},t?t.name:null),o.a.createElement("div",{className:N.a.thumbnails},e.mediaList.map(function(n,a){return o.a.createElement(k.a,{key:a,media:n,isActive:e.selectedIndex===a,className:N.a.thumbnail,onClick:function(){return e.onClick(a)},showMediaDuration:!0,showHoverMask:!0,overlays:0===a?i:void 0,previewInfo:t?t.preview_info:void 0})})))}),I=i(2558),D=i.n(I);function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A=-1,x=1,L=function(e){var t,i;function o(t){var i;return(i=e.call(this,t)||this).state={selectedIndex:t.selectedIndex},i.onMediaClick=i.onMediaClick.bind(g(g(i))),i.handleKeyDown=i.handleKeyDown.bind(g(g(i))),i.moveSelectedIndex=i.moveSelectedIndex.bind(g(g(i))),i}i=e,(t=o).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var a=o.prototype;return a.UNSAFE_componentWillMount=function(){window.addEventListener("keydown",this.handleKeyDown)},a.componentWillUnmount=function(){window.removeEventListener("keydown",this.handleKeyDown)},a.onMediaClick=function(e){this.setState({selectedIndex:e})},a.handleKeyDown=function(e){switch(e.preventDefault(),e.keyCode){case 27:return void this.props.onClose();case 37:return void this.moveSelectedIndex(A);case 39:return void this.moveSelectedIndex(x)}},a.moveSelectedIndex=function(e){var t=this.props.mediaList,i=t?t.length:0;i>1&&this.setState({selectedIndex:(this.state.selectedIndex+e+i)%i})},a.render=function(){var e=this,t=this.props,i=this.state.selectedIndex,o=t.item,a=t.mediaList,s=t.overlays,l=t.addItemToCart;return n.createElement(r.a,{closeWhenClickOverlay:!0,onClose:t.onClose},n.createElement("div",{className:d()("flex",D.a.container)},n.createElement(_,{media:a&&a[i],showArrows:a&&a.length>1,onLeftArrowClick:function(){return e.moveSelectedIndex(A)},onRightArrowClick:function(){return e.moveSelectedIndex(x)},overlays:0===i?s:void 0,previewInfo:o?o.preview_info:void 0}),n.createElement(V,{item:o,mediaList:a,selectedIndex:i,showMediaDuration:!0,onClick:this.onMediaClick,addItemToCart:l,overlays:s})))},o}(n.Component);t.default=L}}]);
//# sourceMappingURL=https://shopee.sg/assets/ProductPageMediaPopup.3b58f926b5504c2cccd0.js.map